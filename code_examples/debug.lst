
Processor: GUS16 v6

; Label listing -----------------------------------

0006   (    6)   CPUMODEL
0020   (   32)   IOBASE
0020   (   32)   IRQEN
0021   (   33)   PFLAGS
0021   (   33)   PWM
0022   (   34)   UARTDAT
0023   (   35)   TIMER
0024   (   36)   GPO
0026   (   38)   FLAG0
0027   (   39)   PC0
0001   (    1)   IRQRXEN
0002   (    2)   IRQTXEN
0004   (    4)   IRQTIMEN
0008   (    8)   IRQPWMEN
0010   (   16)   IRQSSTEPEN
0001   (    1)   UARTDV
0002   (    2)   UARTRDY
0004   (    4)   UARTOVER
0008   (    8)   UARTFER
0010   (   16)   PWMF
8000   (32768)   TIMOV
FC00   (64512)   PINIT
FC00   (64512)   SSTEPIRQ
FAEF   (64239)   JMPIRQ
FC05   (64517)   DB00
FC0D   (64525)   DB001
FC11   (64529)   DB002
FC12   (64530)   DB01
FC22   (64546)   DB02
FC24   (64548)   DB03
FC2B   (64555)   DB04
FC39   (64569)   DB2
FC3D   (64573)   DB3
FC42   (64578)   DB4
FC59   (64601)   DB5
FC66   (64614)   DBPROM
FC67   (64615)   DBKEY
FC6D   (64621)   DB51
FC72   (64626)   DB10
FC79   (64633)   DB15
FC7C   (64636)   DB20
FC81   (64641)   DB30
FC84   (64644)   DB31
FC8A   (64650)   DB35
FC8E   (64654)   DB40
FC97   (64663)   DB45
FC9A   (64666)   DB44
FC9D   (64669)   DB50
FCA4   (64676)   DB60
FCAA   (64682)   DB70
FCB0   (64688)   IEND0
FCB1   (64689)   IEND
FCB4   (64692)   IEND2
FCBA   (64698)   MSGCLS
FCBE   (64702)   MSGFLG
FCCC   (64716)   FLGTBL
FCD0   (64720)   MSGPOS
FCD2   (64722)   MSGREG
FCD5   (64725)   MSGBRK
FCDD   (64733)   MSGEBRK
FCE7   (64743)   MSGPAUSE
FCEC   (64748)   DISABLK
FCEF   (64751)   DISA1
FCFD   (64765)   DISA2
FCFF   (64767)   DISA3
FD07   (64775)   DISASSEMBLE
FD20   (64800)   DIS01
FD25   (64805)   DIS1
FD40   (64832)   DIS13
FD43   (64835)   DIS11
FD50   (64848)   DIS12
FD58   (64856)   DIS2
FD67   (64871)   DIS20
FD6F   (64879)   DIS21
FD7A   (64890)   DIS22
FD80   (64896)   DIS221
FD8A   (64906)   DIS23
FDA2   (64930)   DIS24
FDA2   (64930)   DIS3
FDB3   (64947)   DIS4
FDC6   (64966)   DIS99
FDCC   (64972)   PRNEMO
FDE2   (64994)   PRREG
FDE9   (65001)   NMTAB
FE33   (65075)   GETHEX
FE3B   (65083)   GHEX1
FE44   (65092)   GHEX2
FE4B   (65099)   GHEX3
FE50   (65104)   GHEX9
FE56   (65110)   GHEX95
FE5A   (65114)   MDUMP
FE5D   (65117)   MD1
FE64   (65124)   MD2
FE70   (65136)   MD3
FE83   (65155)   GOODCH
FE88   (65160)   GOCH1
FE89   (65161)   GOCH2
FE8A   (65162)   PUTSBE
FE8B   (65163)   PUTSBE1
FE96   (65174)   PUTSBE3
FE97   (65175)   PUTCH
FE9A   (65178)   PRTDEC
FE9F   (65183)   PRTD0
FEA1   (65185)   PRTD1
FEA7   (65191)   PRTD2
FEA8   (65192)   PRTD5
FEAD   (65197)   PRTD6
FEB3   (65203)   PRTD3
FEB8   (65208)   PRTD9
FEBC   (65212)   PRTHEX8
FEC3   (65219)   PRTHEX
FEC8   (65224)   PTX1
FECE   (65230)   PTX2
FED6   (65238)   BVAR
FED6   (65238)   LDPCF
FED7   (65239)   TRACE
FED8   (65240)   BREAK
FED9   (65241)   RUTSP
FEDA   (65242)   CADDR
FEDB   (65243)   MSGHELP
FF55   (65365)   TXTLOAD
FF62   (65378)   PSTART
FF62   (65378)   START
FF67   (65383)   BUC1
FF71   (65393)   BUC2
FF84   (65412)   GETW
FF89   (65417)   PEND

; Program listing ----------------------------------

0000  -         ;---------------------------------------------------------------------
0000  -         ; PROGRAMMING CONVENTIONS:
0000  -         ; STRICT:
0000  -         ; - CORE REVISION 6 INSTRUCTION SET
0000  -         ; - R7 IS THE STACK POINTER	(SOFTWARE)
0000  -         ; - R6 HOLDS THE RETURN ADDRESS FOR SUBROUTINES (JAL)
0000  -         ; - FULL-DESCENDING STACK
0000  -         ; LOOSE GUIDELINES:
0000  -         ; - R0, R1, R2 ARE USED FOR ARGUMENTS / RESULTS
0000  -         ;              VALUES MAY CHANGE ON SUBROUTINE CALLS
0000  -         ; - R3, R4, R5 ARE USED FOR LOCAL VARIABLES
0000  -         ;              VALUES ARE PRESERVED ON SUBROUTINE CALLS
0000  -         ;---------------------------------------------------------------------
0000  -         ;---------------------------------------------------------------------
0000  -         ;----------- I/O MAP  -----------
0000  -         
0000  -         IOBASE=		0X20
0000  -         IRQEN=		0X20
0000  -         PFLAGS=		0X21
0000  -         PWM=		0X21
0000  -         UARTDAT=	0X22
0000  -         TIMER=		0X23
0000  -         GPO=		0X24
0000  -         
0000  -         FLAG0=		0X26	; USER-MODE FLAGS
0000  -         PC0=		0X27	; USER-MODE PC
0000  -         
0000  -         ;--------- INTERRUPT ENABLE --------
0000  -         IRQRXEN=	1
0000  -         IRQTXEN=	2
0000  -         IRQTIMEN=	4
0000  -         IRQPWMEN=	8
0000  -         IRQSSTEPEN=	16		; SINGLE-STEP IRQ
0000  -         ;--------- PFLAGS REGISTER BITS -----------
0000  -         UARTDV=		1		; DATA VALID (UART RX)
0000  -         UARTRDY=	2		; TRANSMITTER READY (UART TX)
0000  -         UARTOVER=	4		; RX OVERRUN ERROR
0000  -         UARTFER=	8		; RX FRAME ERROR
0000  -         PWMF=		16		; PWM INTERRUPT
0000  -         TIMOV=		0X8000	; TIMER OVERFLOW (SIGN BIT)
0000  -         
0000  -         ;--------------------------------------
0000  -         ;------- HEADER FOR BOOTLOADER --------
0000  -         ;--------------------------------------
0000  -         
0000  -         		ORG		0XFC00-4
FBFC  -         		
FBFC  -  4CFF   		WORD	0X4CFF			; MARK
FBFD  -  FC00   		WORD	PINIT			; DESTINATION ADDRESS
FBFE  -  0389   		WORD	PEND-PINIT		; SIZE (WORDS)
FBFF  -  FF62   		WORD	PSTART			; EXECUTION ADDRESS
FC00  -         
FC00  -         ;--------------------------------------
FC00  -         ;------------- CODE -----------------
FC00  -         ;--------------------------------------
FC00  -         PINIT:
FC00  -         
FC00  -         ;-------------------------------------------------------------------
FC00  -         ; INTERRUPTS
FC00  -         ;-------------------------------------------------------------------
FC00  -         		
FC00  -         SSTEPIRQ:
FC00  -         
FC00  -         JMPIRQ= ~(0X10110-SSTEPIRQ)		; OPCODE OF: JR FROM 0X110 TO HERE
FC00  -         
FC00  -  1F07   		SUBI	R7,7
FC01  -  69E1   		ST		(R7+1),R1
FC02  -  6BE3   		ST		(R7+3),R3
FC03  -  6CE4   		ST		(R7+4),R4
FC04  -  6DE5   		ST		(R7+5),R5
FC05  -         
FC05  -  5520   DB00:	LDI		R5,IOBASE
FC06  -  5BE0   		LDPC	R3
FC07  -  FED6   		WORD	BVAR
FC08  -         		
FC08  -  61A1   		LD		R1,(R5+PFLAGS-IOBASE)
FC09  -  3140   		ANDI	R1,0X40
FC0A  -  8002   		JZ		DB001
FC0B  -  61A2   		LD		R1,(R5+UARTDAT-IOBASE)
FC0C  -  F004   		JR		DB002
FC0D  -  64A7   DB001:	LD		R4,(R5+PC0-IOBASE)	; R4: PC NORMAL MODE
FC0E  -  6162   		LD		R1,(R3+BREAK-BVAR)	; IF(BREAK==PC) SET_TRACE
FC0F  -  0986   		XOR		R1,R4,R1			; CHECK FOR BREAKPOINT
FC10  -  9001   		JNZ		DB01
FC11  -  6D61   DB002:	ST		(R3+TRACE-BVAR),R5	
FC12  -         DB01:		
FC12  -  6161   		LD		R1,(R3+TRACE-BVAR)	; IF (!TRACE) RETURN
FC13  -  80A0   		JZ		IEND2
FC14  -  68E0   		ST		(R7+0),R0			; SAVE REST OF REGISTERS
FC15  -  6AE2   		ST		(R7+2),R2
FC16  -  6EE6   		ST		(R7+6),R6
FC17  -  D00C   		JPL		DB03				; IF (TRACE<0) WAIT FOR RETURN (JIND R6)
FC18  -  6080   		LD		R0,(R4)
FC19  -  5AE0   		LDPC	R2
FC1A  -  58FA   		JIND R6
FC1B  -  080A   		XOR		R0,R0,R2
FC1C  -  9094   		JNZ		IEND
FC1D  -  3101   		ANDI	R1,1
FC1E  -  8003   		JZ		DB02
FC1F  -  6163   		LD		R1,(R3+RUTSP-BVAR)	; HIGHER STACK LEVEL?
FC20  -  013D   		SUB		R1,R1,R7
FC21  -  D08F   		JPL		IEND
FC22  -  5102   DB02:	LDI		R1,2
FC23  -  6961   		ST		(R3+TRACE-BVAR),R1	; TRACE POSITIVE
FC24  -         
FC24  -  60A1   DB03:	LD		R0,(R5+PFLAGS-IOBASE)
FC25  -  3020   		ANDI	R0,0X20				; SCREEN DIRTY?
FC26  -  8004   		JZ		DB04
FC27  -  58E0   		LDPC	R0
FC28  -  FCE7   		WORD	MSGPAUSE
FC29  -  7260   		JAL		PUTSBE
FC2A  -  60A2   		LD		R0,(R5+UARTDAT-IOBASE)	; GETCH
FC2B  -         
FC2B  -  5100   DB04:	LDI		R1,0
FC2C  -  6960   		ST		(R3+LDPCF-BVAR),R1	; CLEAR LDPC FLAG
FC2D  -         
FC2D  -  58E0   		LDPC	R0					; CLEAR SCREEN
FC2E  -  FCBA   		WORD	MSGCLS ;+2
FC2F  -  725A   		JAL		PUTSBE
FC30  -         		
FC30  -         		; PRINT CODE @ PC0
FC30  -  70BB   		JAL		DISABLK		
FC31  -         		; PRINT FLAGS0
FC31  -  58E0   		LDPC	R0
FC32  -  FCBE   		WORD	MSGFLG
FC33  -  7256   		JAL		PUTSBE
FC34  -  64A6   		LD		R4,(R5+FLAG0-IOBASE)
FC35  -  5C30   		RORI	R4,R4,4
FC36  -  5304   		LDI		R3,4
FC37  -  5AE0   		LDPC	R2
FC38  -  FCCC   		WORD	FLGTBL
FC39  -  505F   DB2:	LDI		R0,'_'
FC3A  -  0490   		ADD		R4,R4,R4		
FC3B  -  B001   		JNC		DB3
FC3C  -  6040   		LD		R0,(R2)	
FC3D  -  68A2   DB3:	ST		(R5+UARTDAT-IOBASE),R0
FC3E  -  1201   		ADDI	R2,1
FC3F  -  1B01   		SUBI	R3,1
FC40  -  9FF8   		JNZ		DB2
FC41  -         		
FC41  -         		; PRINT REGISTERS
FC41  -  5300   		LDI		R3,0
FC42  -  58E0   DB4:	LDPC	R0
FC43  -  FCD0   		WORD	MSGPOS
FC44  -  7245   		JAL		PUTSBE
FC45  -  5003   		LDI		R0,3
FC46  -  0060   		ADD		R0,R3,R0
FC47  -  7252   		JAL		PRTDEC
FC48  -  58E0   		LDPC	R0
FC49  -  FCD2   		WORD	MSGREG
FC4A  -  723F   		JAL		PUTSBE
FC4B  -  5030   		LDI		R0,'0'
FC4C  -  0060   		ADD		R0,R3,R0
FC4D  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FC4E  -  503A   		LDI		R0,':'
FC4F  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FC50  -  5020   		LDI		R0,' '
FC51  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FC52  -  086D   		OR		R0,R3,R3
FC53  -  001C   		ADD		R0,R0,R7
FC54  -  6000   		LD		R0,(R0)
FC55  -  4B07   		CMPI	R3,7
FC56  -  9002   		JNZ		DB5
FC57  -  5007   		LDI		R0,7
FC58  -  001C   		ADD		R0,R0,R7
FC59  -  7269   DB5:	JAL		PRTHEX
FC5A  -  1301   		ADDI	R3,1
FC5B  -  4B08   		CMPI	R3,8
FC5C  -  9FE5   		JNZ		DB4
FC5D  -         
FC5D  -         		; PRINT BRK
FC5D  -  58E0   		LDPC	R0
FC5E  -  FCD5   		WORD	MSGBRK
FC5F  -  722A   		JAL		PUTSBE
FC60  -  58E0   		LDPC	R0
FC61  -  FED6   		WORD	BVAR
FC62  -  6002   		LD		R0,(R0+BREAK-BVAR)
FC63  -  725F   		JAL		PRTHEX
FC64  -  58E0   		LDPC	R0
FC65  -  FCDD   		WORD	MSGEBRK
FC66  -  7223   DBPROM:	JAL		PUTSBE
FC67  -         		;------------------
FC67  -         		; USER COMMANDS
FC67  -         		;------------------
FC67  -  60A2   DBKEY:	LD		R0,(R5+UARTDAT-IOBASE)
FC68  -  4863   		CMPI	R0,'c'		; CONTINUE
FC69  -  9008   		JNZ		DB10
FC6A  -  60A0   		LD		R0,(R5)		; DISABLE SINGLE-STEP IRQ
FC6B  -  30EF   		ANDI	R0,0XEF
FC6C  -  68A0   		ST		(R5),R0
FC6D  -  58E0   DB51:	LDPC	R0
FC6E  -  FCBA   		WORD	MSGCLS
FC6F  -  721A   		JAL		PUTSBE
FC70  -  68A6   		ST		(R5+FLAG0-IOBASE),R0	; CLEAR DIRTY
FC71  -  F03F   		JR		IEND
FC72  -         		
FC72  -  486E   DB10:	CMPI	R0,'n'		; BREAK ON NEXT INSTR
FC73  -  9008   		JNZ		DB20
FC74  -  60A7   		LD		R0,(R5+PC0-IOBASE)
FC75  -  1001   		ADDI	R0,1
FC76  -  5BE0   		LDPC	R3
FC77  -  FED6   		WORD	BVAR
FC78  -  6862   		ST		(R3+BREAK-BVAR),R0
FC79  -  5000   DB15:	LDI		R0,0
FC7A  -  6861   		ST		(R3+TRACE-BVAR),R0
FC7B  -  FFF1   		JR		DB51
FC7C  -         
FC7C  -  4865   DB20:	CMPI	R0,'e'		; EXEC WITH BREAKPOINT (SLOW)
FC7D  -  9003   		JNZ		DB30
FC7E  -  5BE0   		LDPC	R3
FC7F  -  FED6   		WORD	BVAR
FC80  -  FFF8   		JR		DB15
FC81  -         		
FC81  -  4872   DB30:	CMPI	R0,'r'		; EXEC UNTIL RETURN
FC82  -  9007   		JNZ		DB35
FC83  -  5001   		LDI		R0,1
FC84  -  5BE0   DB31:	LDPC	R3
FC85  -  FED6   		WORD	BVAR
FC86  -  5801   		RORI	R0,R0,1
FC87  -  6861   		ST		(R3+TRACE-BVAR),R0	; TRACE<0 MEANS STOP ON RETURNS
FC88  -  6F63   		ST		(R3+RUTSP-BVAR),R7	; STACK LEVEL
FC89  -  FFE3   		JR		DB51
FC8A  -  4852   DB35:	CMPI	R0,'R'	; EXEC UNTIL RETURN (HIGHER STACK)
FC8B  -  9002   		JNZ		DB40
FC8C  -  5003   		LDI		R0,3	; TRACE<0 && (TRACE&1) => STOP ON RETURNS IF STACK IS HIGHER
FC8D  -  FFF6   		JR		DB31
FC8E  -         
FC8E  -  4873   DB40:	CMPI	R0,'s'		; STEP
FC8F  -  8020   		JZ		IEND0
FC90  -         		;CMPI	R0,'\n'
FC90  -         		;JZ		DB00
FC90  -  4820   		CMPI	R0,' '
FC91  -  8F73   		JZ		DB00
FC92  -         		
FC92  -  4864   		CMPI	R0,'d'		; DISASSEMBLE
FC93  -  9009   		JNZ		DB50
FC94  -  719E   		JAL		GETHEX
FC95  -  0C01   		OR		R4,R0,R0
FC96  -  7055   		JAL		DISABLK
FC97  -  5BE0   DB45:	LDPC	R3
FC98  -  FED6   		WORD	BVAR
FC99  -  6C64   		ST		(R3+CADDR-BVAR),R4
FC9A  -  58E0   DB44:	LDPC	R0
FC9B  -  FCE1   		WORD	MSGEBRK+4
FC9C  -  FFC9   		JR		DBPROM
FC9D  -         			
FC9D  -  4862   DB50:	CMPI	R0,'b'		; SET BREAKPOINT
FC9E  -  9005   		JNZ		DB60
FC9F  -  7193   		JAL		GETHEX	
FCA0  -  5BE0   		LDPC	R3
FCA1  -  FED6   		WORD	BVAR
FCA2  -  6862   		ST		(R3+BREAK-BVAR),R0
FCA3  -  FF61   		JR		DB00
FCA4  -         
FCA4  -  486D   DB60:	CMPI	R0,'m'		; DUMP MEMORY
FCA5  -  9004   		JNZ		DB70
FCA6  -  718C   		JAL		GETHEX
FCA7  -  0C01   		OR		R4,R0,R0
FCA8  -  71B1   		JAL		MDUMP
FCA9  -  FFED   		JR		DB45
FCAA  -         		
FCAA  -  4868   DB70:	CMPI	R0,'h'		; PRINT HELP
FCAB  -  9FBB   		JNZ		DBKEY
FCAC  -  58E0   		LDPC	R0
FCAD  -  FEDB   		WORD	MSGHELP
FCAE  -  71DB   		JAL		PUTSBE
FCAF  -  FFEA   		JR		DB44
FCB0  -         
FCB0  -  68A6   IEND0:	ST		(R5+FLAG0-IOBASE),R0	; CLEAR DIRTY
FCB1  -  60E0   IEND:	LD		R0,(R7+0)
FCB2  -  62E2   		LD		R2,(R7+2)
FCB3  -  66E6   		LD		R6,(R7+6)
FCB4  -         
FCB4  -  61E1   IEND2:	LD		R1,(R7+1)
FCB5  -  63E3   		LD		R3,(R7+3)
FCB6  -  64E4   		LD		R4,(R7+4)
FCB7  -  65E5   		LD		R5,(R7+5)
FCB8  -  1707   		ADDI	R7,7
FCB9  -  58E3   		RETI
FCBA  -         
FCBA  -  1B5B   MSGCLS:	ASCZBE "\e[2J\e[H"
FCBB  -  324A   
FCBC  -  1B5B   
FCBD  -  4800   
FCBE  -  1B5B   MSGFLG:	ASCZBE "\e[1;32H<- PC\e[1;39HFlags: "
FCBF  -  313B   
FCC0  -  3332   
FCC1  -  483C   
FCC2  -  2D20   
FCC3  -  5043   
FCC4  -  1B5B   
FCC5  -  313B   
FCC6  -  3339   
FCC7  -  4846   
FCC8  -  6C61   
FCC9  -  6773   
FCCA  -  3A20   
FCCB  -  0000   
FCCC  -  0056   FLGTBL: WORD 'V'
FCCD  -  004E   		WORD 'N'
FCCE  -  0043   		WORD 'C'
FCCF  -  005A   		WORD 'Z'
FCD0  -  1B5B   MSGPOS:	ASCZBE "\e["
FCD1  -  0000   
FCD2  -  3B34   MSGREG:	ASCZBE ";42HR"
FCD3  -  3248   
FCD4  -  5200   
FCD5  -  1B5B   MSGBRK:	ASCZBE "\e[13;39HBreak: "
FCD6  -  3133   
FCD7  -  3B33   
FCD8  -  3948   
FCD9  -  4272   
FCDA  -  6561   
FCDB  -  6B3A   
FCDC  -  2000   
FCDD  -  1B5B   MSGEBRK:	ASCZBE "\e[22;01HhcesnrRbdm>"
FCDE  -  3232   
FCDF  -  3B30   
FCE0  -  3148   
FCE1  -  6863   
FCE2  -  6573   
FCE3  -  6E72   
FCE4  -  5262   
FCE5  -  646D   
FCE6  -  3E00   
FCE7  -  3C70   MSGPAUSE:	ASCZBE "<paused>"
FCE8  -  6175   
FCE9  -  7365   
FCEA  -  643E   
FCEB  -  0000   
FCEC  -         
FCEC  -         ;------------------------------------------------------
FCEC  -         ; DISSASEMBLE 20 INSTR AT (R4)
FCEC  -         DISABLK:
FCEC  -  1F01   		SUBI	R7,1
FCED  -  6EE0   		ST		(R7),R6
FCEE  -         
FCEE  -  5314   		LDI		R3,20
FCEF  -  0891   DISA1:	OR		R0,R4,R4
FCF0  -  71D2   		JAL		PRTHEX
FCF1  -  503A   		LDI		R0,':'
FCF2  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FCF3  -  5020   		LDI		R0,' '
FCF4  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FCF5  -  6080   		LD		R0,(R4)
FCF6  -  71CC   		JAL		PRTHEX
FCF7  -  59E0   		LDPC	R1
FCF8  -  FED6   		WORD	LDPCF
FCF9  -  6120   		LD		R1,(R1)
FCFA  -  9002   		JNZ		DISA2
FCFB  -  700B   		JAL		DISASSEMBLE
FCFC  -  F002   		JR		DISA3
FCFD  -  5000   DISA2:	LDI		R0,0
FCFE  -  6820   		ST		(R1),R0
FCFF  -  500A   DISA3:	LDI		R0,'\n'
FD00  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FD01  -  1401   		ADDI	R4,1
FD02  -  1B01   		SUBI	R3,1
FD03  -  9FEB   		JNZ		DISA1
FD04  -         
FD04  -  66E0   		LD		R6,(R7)
FD05  -  1701   		ADDI	R7,1
FD06  -  58FA   		JIND	R6
FD07  -         
FD07  -         ;------------------------------------------------------
FD07  -         ; DISSASEMBLE SINGLE INSTRUCTION AT (R4)
FD07  -         DISASSEMBLE:
FD07  -  1F04   		SUBI	R7,4
FD08  -  68E0   		ST		(R7+0),R0
FD09  -  69E1   		ST		(R7+1),R1
FD0A  -  6DE2   		ST		(R7+2),R5
FD0B  -  6EE3   		ST		(R7+3),R6
FD0C  -         		
FD0C  -  5000   		LDI		R0,0
FD0D  -  59E0   		LDPC	R1
FD0E  -  FED6   		WORD	LDPCF
FD0F  -  6820   		ST		(R1),R0
FD10  -  5020   		LDI		R0,' '
FD11  -  7185   		JAL		PUTCH
FD12  -  6080   		LD		R0,(R4)
FD13  -  5860   		RORI	R0,R0,12
FD14  -  300F   		ANDI	R0,0XF
FD15  -  4807   		CMPI	R0,7
FD16  -  C00E   		JMI		DIS1
FD17  -  1015   		ADDI	R0,28-7
FD18  -  70B3   		JAL		PRNEMO
FD19  -  6180   		LD		R1,(R4)
FD1A  -  5DE0   		LDPC	R5
FD1B  -  0FFF   		WORD	0XFFF
FD1C  -  0DA4   		AND		R5,R5,R1
FD1D  -  5D74   		RORI	R5,R5,12
FD1E  -  D001   		JPL		DIS01
FD1F  -  3D0F   		ORI		R5,0XF
FD20  -  5D34   DIS01:	RORI	R5,R5,4	
FD21  -  00B0   		ADD		R0,R5,R4
FD22  -  1001   		ADDI	R0,1
FD23  -  719F   		JAL		PRTHEX
FD24  -  F0A1   		JR		DIS99
FD25  -         
FD25  -  4806   DIS1:	CMPI	R0,6
FD26  -  9031   		JNZ		DIS2
FD27  -  6180   		LD		R1,(R4)
FD28  -  5847   		RORI	R0,R1,11
FD29  -  3001   		ANDI	R0,1
FD2A  -  101A   		ADDI	R0,26
FD2B  -  70A0   		JAL		PRNEMO
FD2C  -  6080   		LD		R0,(R4)
FD2D  -  5860   		RORI	R0,R0,12
FD2E  -  C014   		JMI		DIS11
FD2F  -  5860   		RORI	R0,R0,12	; LD
FD30  -  70B1   		JAL		PRREG
FD31  -  502C   		LDI		R0,','
FD32  -  7164   		JAL		PUTCH
FD33  -  5028   		LDI		R0,'('
FD34  -  7162   		JAL		PUTCH
FD35  -  6080   		LD		R0,(R4)
FD36  -  5821   		RORI	R0,R0,5
FD37  -  70AA   		JAL		PRREG
FD38  -  6080   		LD		R0,(R4)
FD39  -  301F   		ANDI	R0,31
FD3A  -  8005   		JZ		DIS13
FD3B  -  502B   		LDI		R0,'+'
FD3C  -  715A   		JAL		PUTCH
FD3D  -  6080   		LD		R0,(R4)
FD3E  -  301F   		ANDI	R0,31
FD3F  -  715A   		JAL		PRTDEC
FD40  -  5029   DIS13:	LDI		R0,')'
FD41  -  7155   		JAL		PUTCH
FD42  -  F083   		JR		DIS99
FD43  -  5028   DIS11:	LDI		R0,'('	; ST
FD44  -  7152   		JAL		PUTCH
FD45  -  6080   		LD		R0,(R4)
FD46  -  5821   		RORI	R0,R0,5
FD47  -  709A   		JAL		PRREG
FD48  -  6080   		LD		R0,(R4)
FD49  -  301F   		ANDI	R0,31
FD4A  -  8005   		JZ		DIS12
FD4B  -  502B   		LDI		R0,'+'
FD4C  -  714A   		JAL		PUTCH
FD4D  -  6080   		LD		R0,(R4)
FD4E  -  301F   		ANDI	R0,31
FD4F  -  714A   		JAL		PRTDEC		
FD50  -  5029   DIS12:	LDI		R0,')'
FD51  -  7145   		JAL		PUTCH
FD52  -  502C   		LDI		R0,','
FD53  -  7143   		JAL		PUTCH
FD54  -  6080   		LD		R0,(R4)
FD55  -  5840   		RORI	R0,R0,8
FD56  -  708B   		JAL		PRREG
FD57  -  F06E   		JR		DIS99
FD58  -         		
FD58  -  4805   DIS2:	CMPI	R0,5
FD59  -  9048   		JNZ		DIS3
FD5A  -  6080   		LD		R0,(R4)
FD5B  -  5903   		RORI	R1,R0,3
FD5C  -  311C   		ANDI	R1,0X1C
FD5D  -  5A22   		RORI	R2,R0,6
FD5E  -  3220   		ANDI	R2,0X20
FD5F  -  3003   		ANDI	R0,3
FD60  -  0805   		OR		R0,R0,R1
FD61  -  0809   		OR		R0,R0,R2
FD62  -  483F   		CMPI	R0,0X3F
FD63  -  9003   		JNZ		DIS20
FD64  -  5019   		LDI		R0,25		; RETI
FD65  -  7066   		JAL		PRNEMO
FD66  -  F05F   		JR		DIS99
FD67  -  483E   DIS20:	CMPI	R0,0X3E
FD68  -  9006   		JNZ		DIS21
FD69  -  5018   		LDI		R0,24		; JIND
FD6A  -  7061   		JAL		PRNEMO
FD6B  -  6080   		LD		R0,(R4)
FD6C  -  5802   		RORI	R0,R0,2
FD6D  -  7074   		JAL		PRREG
FD6E  -  F057   		JR		DIS99
FD6F  -  483C   DIS21:	CMPI	R0,0X3C
FD70  -  9009   		JNZ		DIS22
FD71  -  5017   		LDI		R0,23		; LDPC
FD72  -  7059   		JAL		PRNEMO
FD73  -  6080   		LD		R0,(R4)
FD74  -  5840   		RORI	R0,R0,8
FD75  -  706C   		JAL		PRREG
FD76  -  58E0   		LDPC	R0
FD77  -  FED6   		WORD	LDPCF
FD78  -  6800   		ST		(R0),R0
FD79  -  F04C   		JR		DIS99
FD7A  -  4830   DIS22:	CMPI	R0,0X30
FD7B  -  C00E   		JMI		DIS23
FD7C  -  181E   		SUBI	R0,48-18	; RORC - NEG
FD7D  -  4816   		CMPI	R0,22
FD7E  -  C001   		JMI		DIS221
FD7F  -  1801   		SUBI	R0,1
FD80  -  704B   DIS221:	JAL		PRNEMO	
FD81  -  6080   		LD		R0,(R4)
FD82  -  5840   		RORI	R0,R0,8
FD83  -  705E   		JAL		PRREG
FD84  -  502C   		LDI		R0,','
FD85  -  7111   		JAL		PUTCH
FD86  -  6080   		LD		R0,(R4)
FD87  -  5802   		RORI	R0,R0,2
FD88  -  7059   		JAL		PRREG	
FD89  -  F03C   		JR		DIS99
FD8A  -  5820   DIS23:	RORI	R0,R0,4
FD8B  -  3003   		ANDI	R0,3
FD8C  -  4802   		CMPI	R0,2
FD8D  -  9014   		JNZ		DIS24
FD8E  -  5011   		LDI		R0,17		; RORI
FD8F  -  703C   		JAL		PRNEMO
FD90  -  6080   		LD		R0,(R4)
FD91  -  5840   		RORI	R0,R0,8
FD92  -  704F   		JAL		PRREG
FD93  -  502C   		LDI		R0,','
FD94  -  7102   		JAL		PUTCH
FD95  -  6080   		LD		R0,(R4)
FD96  -  5802   		RORI	R0,R0,2
FD97  -  704A   		JAL		PRREG
FD98  -  502C   		LDI		R0,','
FD99  -  70FD   		JAL		PUTCH
FD9A  -  6080   		LD		R0,(R4)
FD9B  -  5903   		RORI	R1,R0,3
FD9C  -  3003   		ANDI	R0,3
FD9D  -  310C   		ANDI	R1,0XC
FD9E  -  0805   		OR		R0,R0,R1
FD9F  -  520A   		LDI		R2,10
FDA0  -  70F9   		JAL		PRTDEC
FDA1  -  F024   		JR		DIS99
FDA2  -         DIS24:	; LDI
FDA2  -  6080   DIS3:	LD		R0,(R4)		; IMMEDIATE INSTRS
FDA3  -  5843   		RORI	R0,R0,11
FDA4  -  300F   		ANDI	R0,0XF
FDA5  -  1802   		SUBI	R0,2
FDA6  -  C00C   		JMI		DIS4
FDA7  -  1008   		ADDI	R0,8
FDA8  -  7023   		JAL		PRNEMO
FDA9  -  6080   		LD		R0,(R4)
FDAA  -  5840   		RORI	R0,R0,8
FDAB  -  7036   		JAL		PRREG
FDAC  -  502C   		LDI		R0,','
FDAD  -  70E9   		JAL		PUTCH
FDAE  -  6080   		LD		R0,(R4)
FDAF  -  30FF   		ANDI	R0,0XFF
FDB0  -  520A   		LDI		R2,10
FDB1  -  710A   		JAL		PRTHEX8
FDB2  -  F013   		JR		DIS99
FDB3  -         
FDB3  -  6080   DIS4:	LD		R0,(R4)		; 3-OPERAND INSTRS
FDB4  -  5941   		RORI	R1,R0,9
FDB5  -  3003   		ANDI	R0,3
FDB6  -  3104   		ANDI	R1,4
FDB7  -  0805   		OR		R0,R0,R1
FDB8  -  7013   		JAL		PRNEMO
FDB9  -  6080   		LD		R0,(R4)
FDBA  -  5840   		RORI	R0,R0,8
FDBB  -  7026   		JAL		PRREG
FDBC  -  502C   		LDI		R0,','
FDBD  -  70D9   		JAL		PUTCH
FDBE  -  6080   		LD		R0,(R4)
FDBF  -  5821   		RORI	R0,R0,5
FDC0  -  7021   		JAL		PRREG
FDC1  -  502C   		LDI		R0,','
FDC2  -  70D4   		JAL		PUTCH
FDC3  -  6080   		LD		R0,(R4)
FDC4  -  5802   		RORI	R0,R0,2
FDC5  -  701C   		JAL		PRREG
FDC6  -         		
FDC6  -         
FDC6  -         DIS99:	
FDC6  -  60E0   		LD		R0,(R7+0)
FDC7  -  61E1   		LD		R1,(R7+1)
FDC8  -  65E2   		LD		R5,(R7+2)
FDC9  -  66E3   		LD		R6,(R7+3)
FDCA  -  1704   		ADDI	R7,4
FDCB  -  58FA   		JIND	R6
FDCC  -         		
FDCC  -         
FDCC  -  5122   PRNEMO:	LDI		R1,UARTDAT
FDCD  -  5520   		LDI		R5,' '
FDCE  -  6D20   		ST		(R1),R5
FDCF  -  6D20   		ST		(R1),R5		
FDD0  -  5DE0   		LDPC	R5
FDD1  -  FDE9   		WORD	NMTAB
FDD2  -  0000   		ADD		R0,R0,R0
FDD3  -  05A0   		ADD		R5,R5,R0
FDD4  -  60A0   		LD		R0,(R5)
FDD5  -  5840   		RORI	R0,R0,8
FDD6  -  6820   		ST		(R1),R0
FDD7  -  5840   		RORI	R0,R0,8
FDD8  -  6820   		ST		(R1),R0
FDD9  -  60A1   		LD		R0,(R5+1)
FDDA  -  5840   		RORI	R0,R0,8
FDDB  -  6820   		ST		(R1),R0
FDDC  -  5840   		RORI	R0,R0,8
FDDD  -  6820   		ST		(R1),R0
FDDE  -  5520   		LDI		R5,' '
FDDF  -  6D20   		ST		(R1),R5
FDE0  -  6D20   		ST		(R1),R5
FDE1  -  58FA   		JIND	R6
FDE2  -         
FDE2  -  5122   PRREG:	LDI		R1,UARTDAT
FDE3  -  5252   		LDI		R2,'R'
FDE4  -  6A20   		ST		(R1),R2
FDE5  -  3007   		ANDI	R0,7
FDE6  -  1030   		ADDI	R0,'0'
FDE7  -  6820   		ST		(R1),R0
FDE8  -  58FA   		JIND	R6
FDE9  -         		
FDE9  -         
FDE9  -         				
FDE9  -  4144   NMTAB:	WORD ('A'<<8)|'D'	; 0: ADD
FDEA  -  4420   		WORD ('D'<<8)|' '
FDEB  -  5355   		WORD ('S'<<8)|'U'	; 1: SUB
FDEC  -  4220   		WORD ('B'<<8)|' '				
FDED  -  4144   		WORD ('A'<<8)|'D'	; 2: ADC
FDEE  -  4320   		WORD ('C'<<8)|' '				
FDEF  -  5342   		WORD ('S'<<8)|'B'	; 3: SBC
FDF0  -  4320   		WORD ('C'<<8)|' '				
FDF1  -  414E   		WORD ('A'<<8)|'N'	; 4: AND
FDF2  -  4420   		WORD ('D'<<8)|' '				
FDF3  -  4F52   		WORD ('O'<<8)|'R'	; 5: OR
FDF4  -  2020   		WORD (' '<<8)|' '				
FDF5  -  584F   		WORD ('X'<<8)|'O'	; 6: XOR
FDF6  -  5220   		WORD ('R'<<8)|' '				
FDF7  -  4249   		WORD ('B'<<8)|'I'	; 7: BIC
FDF8  -  4320   		WORD ('C'<<8)|' '				
FDF9  -  4144   		WORD ('A'<<8)|'D'	; 8: ADDI
FDFA  -  4449   		WORD ('D'<<8)|'I'				
FDFB  -  5355   		WORD ('S'<<8)|'U'	; 9: SUBI
FDFC  -  4249   		WORD ('B'<<8)|'I'				
FDFD  -  4144   		WORD ('A'<<8)|'D'	; 10: ADCI
FDFE  -  4349   		WORD ('C'<<8)|'I'				
FDFF  -  5342   		WORD ('S'<<8)|'B'	; 11: SBCI
FE00  -  4349   		WORD ('C'<<8)|'I'				
FE01  -  414E   		WORD ('A'<<8)|'N'	; 12: ANDI
FE02  -  4449   		WORD ('D'<<8)|'I'				
FE03  -  4F52   		WORD ('O'<<8)|'R'	; 13: ORI
FE04  -  4920   		WORD ('I'<<8)|' '				
FE05  -  584F   		WORD ('X'<<8)|'O'	; 14: XORI
FE06  -  5249   		WORD ('R'<<8)|'I'				
FE07  -  434D   		WORD ('C'<<8)|'M'	; 15: CMPI
FE08  -  5049   		WORD ('P'<<8)|'I'				
FE09  -  4C44   		WORD ('L'<<8)|'D'	; 16: LDI
FE0A  -  4920   		WORD ('I'<<8)|' '				
FE0B  -  524F   		WORD ('R'<<8)|'O'	; 17: RORI
FE0C  -  5249   		WORD ('R'<<8)|'I'				
FE0D  -  524F   		WORD ('R'<<8)|'O'	; 18: RORC
FE0E  -  5243   		WORD ('R'<<8)|'C'				
FE0F  -  5348   		WORD ('S'<<8)|'H'	; 19: SHR
FE10  -  5220   		WORD ('R'<<8)|' '				
FE11  -  5348   		WORD ('S'<<8)|'H'	; 20: SHRA
FE12  -  5241   		WORD ('R'<<8)|'A'				
FE13  -  4E4F   		WORD ('N'<<8)|'O'	; 21: NOT
FE14  -  5420   		WORD ('T'<<8)|' '				
FE15  -  4E45   		WORD ('N'<<8)|'E'	; 22: NEG
FE16  -  4720   		WORD ('G'<<8)|' '				
FE17  -  4C44   		WORD ('L'<<8)|'D'	; 23: LDPC
FE18  -  5043   		WORD ('P'<<8)|'C'				
FE19  -  4A49   		WORD ('J'<<8)|'I'	; 24: JIND
FE1A  -  4E44   		WORD ('N'<<8)|'D'				
FE1B  -  5245   		WORD ('R'<<8)|'E'	; 25: RETI
FE1C  -  5449   		WORD ('T'<<8)|'I'				
FE1D  -  4C44   		WORD ('L'<<8)|'D'	; 26: LD
FE1E  -  2020   		WORD (' '<<8)|' '				
FE1F  -  5354   		WORD ('S'<<8)|'T'	; 27: ST
FE20  -  2020   		WORD (' '<<8)|' '				
FE21  -  4A41   		WORD ('J'<<8)|'A'	; 28: JAL
FE22  -  4C20   		WORD ('L'<<8)|' '				
FE23  -  4A5A   		WORD ('J'<<8)|'Z'	; 29: JZ
FE24  -  2020   		WORD (' '<<8)|' '				
FE25  -  4A4E   		WORD ('J'<<8)|'N'	; 30: JNZ
FE26  -  5A20   		WORD ('Z'<<8)|' '				
FE27  -  4A43   		WORD ('J'<<8)|'C'	; 31: JC
FE28  -  2020   		WORD (' '<<8)|' '				
FE29  -  4A4E   		WORD ('J'<<8)|'N'	; 32: JNC
FE2A  -  4320   		WORD ('C'<<8)|' '				
FE2B  -  4A4D   		WORD ('J'<<8)|'M'	; 33: JMI
FE2C  -  4920   		WORD ('I'<<8)|' '				
FE2D  -  4A50   		WORD ('J'<<8)|'P'	; 34: JPL
FE2E  -  4C20   		WORD ('L'<<8)|' '				
FE2F  -  4A56   		WORD ('J'<<8)|'V'	; 35: JV
FE30  -  2020   		WORD (' '<<8)|' '		
FE31  -  4A52   		WORD ('J'<<8)|'R'	; 36: JR
FE32  -  2020   		WORD (' '<<8)|' '				
FE33  -         
FE33  -         ;-------------------------------------------------------------------
FE33  -         ; 	GET AN HEX VALUE FROM UART, WITH EDITING
FE33  -         ;     CADDR HOLDS THE INITIAL VALUE
FE33  -         ;     R0 CONTENTS ARE PRINTED AS CHAR IN FRONT TO THE HEX VALUE
FE33  -         ;     R0 RETURNS THE EDITED VALUE
FE33  -         ;   HEX DIGITS ARE SHIFTED TO THE LEFT UNTIL AN NEW-LINE IS RECEIVED
FE33  -  1F01   GETHEX:	SUBI	R7,1
FE34  -  6EE0   		ST		(R7),R6
FE35  -  7061   		JAL		PUTCH
FE36  -  5020   		LDI		R0,' '
FE37  -  705F   		JAL		PUTCH
FE38  -  5BE0   		LDPC	R3
FE39  -  FED6   		WORD	BVAR
FE3A  -  6064   		LD		R0,(R3+CADDR-BVAR)
FE3B  -  7087   GHEX1:	JAL		PRTHEX
FE3C  -  61A2   		LD		R1,(R5+UARTDAT-IOBASE)
FE3D  -  490A   		CMPI	R1,'\n'
FE3E  -  8017   		JZ		GHEX95
FE3F  -  4930   		CMPI	R1,'0'
FE40  -  C00F   		JMI		GHEX9
FE41  -  4960   		CMPI	R1,'a'-1
FE42  -  C001   		JMI		GHEX2
FE43  -  1920   		SUBI	R1,32
FE44  -  493A   GHEX2:	CMPI	R1,'9'+1
FE45  -  C005   		JMI		GHEX3
FE46  -  4940   		CMPI	R1,'A'-1
FE47  -  C008   		JMI		GHEX9
FE48  -  4947   		CMPI	R1,'F'+1
FE49  -  D006   		JPL		GHEX9
FE4A  -  1907   		SUBI	R1,7
FE4B  -  1930   GHEX3:	SUBI	R1,'0'
FE4C  -  5860   		RORI	R0,R0,12
FE4D  -  380F   		ORI		R0,0XF
FE4E  -  400F   		XORI	R0,0XF
FE4F  -  0004   		ADD		R0,R0,R1
FE50  -         		
FE50  -  5108   GHEX9:	LDI		R1,'\b'
FE51  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE52  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE53  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE54  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE55  -  FFE5   		JR		GHEX1			
FE56  -         
FE56  -  69A2   GHEX95:	ST		(R5+UARTDAT-IOBASE),R1
FE57  -  66E0   		LD		R6,(R7)
FE58  -  1701   		ADDI	R7,1
FE59  -  58FA   		JIND	R6
FE5A  -         ;-------------------------------------------------------------------
FE5A  -         ; HEX DUMP OF THE MEMORY BLOCK POINTED BY R4
FE5A  -  1F01   MDUMP:	SUBI	R7,1
FE5B  -  6EE0   		ST		(R7),R6
FE5C  -  5310   		LDI		R3,16
FE5D  -  0891   MD1:	OR		R0,R4,R4
FE5E  -  7064   		JAL		PRTHEX			; ADDRESS
FE5F  -  513A   		LDI		R1,':'
FE60  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE61  -  5120   		LDI		R1,' '
FE62  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE63  -  5208   		LDI		R2,8
FE64  -  6080   MD2:	LD		R0,(R4)			; DATA
FE65  -  705D   		JAL		PRTHEX
FE66  -  5120   		LDI		R1,' '
FE67  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE68  -  1401   		ADDI	R4,1
FE69  -  1A01   		SUBI	R2,1
FE6A  -  9FF9   		JNZ		MD2
FE6B  -  5120   		LDI		R1,' '
FE6C  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE6D  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE6E  -         		
FE6E  -  1C08   		SUBI	R4,8
FE6F  -  5208   		LDI		R2,8
FE70  -  6080   MD3:	LD		R0,(R4)
FE71  -  5940   		RORI	R1,R0,8
FE72  -  7010   		JAL		GOODCH
FE73  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE74  -  0901   		OR		R1,R0,R0
FE75  -  700D   		JAL		GOODCH
FE76  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE77  -  5120   		LDI		R1,' '
FE78  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE79  -  1401   		ADDI	R4,1
FE7A  -  1A01   		SUBI	R2,1
FE7B  -  9FF4   		JNZ		MD3
FE7C  -  510A   		LDI		R1,'\n'
FE7D  -  69A2   		ST		(R5+UARTDAT-IOBASE),R1
FE7E  -  1B01   		SUBI	R3,1
FE7F  -  9FDD   		JNZ		MD1
FE80  -         		
FE80  -  66E0   		LD		R6,(R7)
FE81  -  1701   		ADDI	R7,1
FE82  -  58FA   		JIND	R6
FE83  -         
FE83  -         ;--------------------------------------
FE83  -         ; 		FORCES A GOOD ASCII CHAR IN R1
FE83  -  31FF   GOODCH:	ANDI	R1,0XFF
FE84  -  497F   		CMPI	R1,127
FE85  -  D002   		JPL		GOCH1
FE86  -  4920   		CMPI	R1,' '
FE87  -  D001   		JPL		GOCH2
FE88  -  512E   GOCH1:	LDI		R1,'.'
FE89  -  58FA   GOCH2:	JIND	R6
FE8A  -         
FE8A  -         ;-------------------------------------------------------------------
FE8A  -         ; I/O SUBROUTINES
FE8A  -         ;-------------------------------------------------------------------
FE8A  -         
FE8A  -         ;------------------------------------------------------------
FE8A  -         ; PRINTS ASCIIZ (16-BIT PACKED, BIG ENDIAN) STRING ON UART 
FE8A  -         ; PARAMETERS:
FE8A  -         ;	R0: POINTER TO STRING
FE8A  -         ;	R6: RETURN ADDRESS (JAL)
FE8A  -         ; RETURS:
FE8A  -         ; 	R0-R2: MODIFIED
FE8A  -         
FE8A  -  5222   PUTSBE:	LDI		R2,UARTDAT
FE8B  -         PUTSBE1:
FE8B  -  6100   		LD		R1,(R0)
FE8C  -  5944   		RORI	R1,R1,8
FE8D  -  31FF   		ANDI	R1,0XFF
FE8E  -  8007   		JZ		PUTSBE3
FE8F  -  6940   		ST		(R2),R1
FE90  -         		
FE90  -  6100   		LD		R1,(R0)
FE91  -  31FF   		ANDI	R1,0XFF
FE92  -  8003   		JZ		PUTSBE3
FE93  -  6940   		ST		(R2),R1
FE94  -  1001   		ADDI	R0,1
FE95  -  FFF5   		JR		PUTSBE1
FE96  -         
FE96  -         PUTSBE3:
FE96  -  58FA   		JIND	R6
FE97  -         ;----------------------------------------------
FE97  -         ; SENDS CHARACTER TO UART
FE97  -         ; PARAMETERS:
FE97  -         ;	R0: CHARACTER TO SEND
FE97  -         ;	R6: RETURN ADDRESS (JAL)
FE97  -         ; RETURNS:
FE97  -         ; 	R1: MODIFFIED
FE97  -         ; NOTES: CPU CLOCK STOPS IF UART NOT READY FOR TRANSMISSION
FE97  -         
FE97  -  5122   PUTCH:	LDI		R1,UARTDAT
FE98  -  6820   		ST		(R1),R0		
FE99  -  58FA   		JIND	R6			
FE9A  -         
FE9A  -         ;----------------------------------------------
FE9A  -         ; PRINTS DECIMAL NUMBER (OR HEX, OCTAL,...)
FE9A  -         ; PARAMETERS:
FE9A  -         ;	R0: NUMBER TO PRINT
FE9A  -         ;	R6: RETURN ADDRESS (JAL)
FE9A  -          
FE9A  -         ; RETURNS:
FE9A  -         ;	R0, R1: MODIFFIED
FE9A  -         ; NOTES:
FE9A  -         ;	AVOIDS PRINTING ZEROES ON THE LEFT
FE9A  -         ;   STACK USED FOR TEMPORARY DIGIT STORAGE
FE9A  -         
FE9A  -         PRTDEC:
FE9A  -  1F01   		SUBI	R7,1
FE9B  -  6EE0   		ST		(R7),R6
FE9C  -         
FE9C  -  5100   		LDI		R1,0		; END OF STRING MARK
FE9D  -  1F01   		SUBI	R7,1		; TO STACK
FE9E  -  69E0   		ST		(R7),R1
FE9F  -  5100   PRTD0:	LDI		R1,0		; R0=R0/R2, R1=REMAINDER
FEA0  -  5610   		LDI		R6,16		
FEA1  -  0000   PRTD1:	ADD		R0,R0,R0
FEA2  -  0126   		ADC		R1,R1,R1
FEA3  -  190A   		SUBI	R1,10
FEA4  -  B002   		JNC		PRTD2
FEA5  -  1001   		ADDI	R0,1
FEA6  -  F001   		JR		PRTD5
FEA7  -  110A   PRTD2:	ADDI	R1,10
FEA8  -  1E01   PRTD5:	SUBI	R6,1
FEA9  -  9FF7   		JNZ		PRTD1
FEAA  -  490A   		CMPI	R1,10		; DIGITS OVER '9' TRANSLATED TO 'A','B'...
FEAB  -  C001   		JMI		PRTD6
FEAC  -  1107   		ADDI	R1,7
FEAD  -  5630   PRTD6:	LDI		R6,'0'		; REMAINDER IN ASCII GOES TO STACK
FEAE  -  0138   		ADD		R1,R1,R6
FEAF  -  1F01   		SUBI	R7,1
FEB0  -  69E0   		ST		(R7),R1
FEB1  -  0801   		OR		R0,R0,R0	; REPEAT UNTIL ZERO
FEB2  -  9FEC   		JNZ		PRTD0
FEB3  -         
FEB3  -  60E0   PRTD3:	LD		R0,(R7)		; RETRIEVE CHARACTER FROM STACK
FEB4  -  8003   		JZ		PRTD9		; END OF STRING?
FEB5  -  1701   		ADDI	R7,1
FEB6  -  7FE0   		JAL		PUTCH
FEB7  -  FFFB   		JR		PRTD3
FEB8  -         
FEB8  -  1701   PRTD9:	ADDI	R7,1
FEB9  -  66E0   		LD		R6,(R7)
FEBA  -  1701   		ADDI	R7,1
FEBB  -  58FA   		JIND	R6
FEBC  -         
FEBC  -         ;-------------------------------------------
FEBC  -         ; PRINT LOWER 8 BITS OF R0 AS HEX (2 DIGITS)
FEBC  -         PRTHEX8:
FEBC  -  1F02   		SUBI	R7,2
FEBD  -  6AE0   		ST		(R7),R2
FEBE  -  6EE1   		ST		(R7+1),R6
FEBF  -  5622   		LDI		R6,UARTDAT
FEC0  -  5202   		LDI		R2,2
FEC1  -  5840   		RORI	R0,R0,8
FEC2  -  F005   		JR		PTX1
FEC3  -         
FEC3  -         ;--------------------------------------
FEC3  -         ; PRINT 16 BITS OF R0 AS HEX (4 DIGITS)
FEC3  -  1F02   PRTHEX:	SUBI	R7,2
FEC4  -  6AE0   		ST		(R7),R2
FEC5  -  6EE1   		ST		(R7+1),R6
FEC6  -  5622   		LDI		R6,UARTDAT
FEC7  -  5204   		LDI		R2,4
FEC8  -  5860   PTX1:	RORI	R0,R0,12
FEC9  -  0901   		OR		R1,R0,R0
FECA  -  310F   		ANDI	R1,15
FECB  -  490A   		CMPI	R1,10
FECC  -  C001   		JMI		PTX2
FECD  -  1107   		ADDI	R1,7
FECE  -  1130   PTX2:	ADDI	R1,'0'
FECF  -  69C0   		ST		(R6),R1
FED0  -  1A01   		SUBI	R2,1
FED1  -  9FF6   		JNZ		PTX1
FED2  -  62E0   		LD		R2,(R7)
FED3  -  66E1   		LD		R6,(R7+1)
FED4  -  1702   		ADDI	R7,2
FED5  -  58FA   		JIND	R6
FED6  -         
FED6  -         ;-------------------------------------------------------------------
FED6  -         ; VARIABLES
FED6  -         ;-------------------------------------------------------------------
FED6  -         BVAR:
FED6  -  0000   LDPCF:	WORD	0
FED7  -  0000   TRACE:	WORD	0
FED8  -  0000   BREAK:	WORD 	0
FED9  -  0000   RUTSP:	WORD	0
FEDA  -  0100   CADDR:	WORD	0X100
FEDB  -         
FEDB  -         ;-------------------------------------------------------------------
FEDB  -         ; TEXT (OVERWRITABLE BY THE STACK...MAYBE)
FEDB  -         ;-------------------------------------------------------------------
FEDB  -  0A3C   MSGHELP:	ASCZBE "\n<space>\tredraw screen\nc\tContinue (no stop)\ne\tExecute (w breakpoint)\ns\tSingle step\nn\texec until Next instr\nr\texec until return (JIND R6)\nR\texec until return at higher stack level\nb [adr]\tset Breakpoint\nd [adr]\tDissasemble\nm [adr]\tMemory dump\n"
FEDC  -  7370   
FEDD  -  6163   
FEDE  -  653E   
FEDF  -  0972   
FEE0  -  6564   
FEE1  -  7261   
FEE2  -  7720   
FEE3  -  7363   
FEE4  -  7265   
FEE5  -  656E   
FEE6  -  0A63   
FEE7  -  0943   
FEE8  -  6F6E   
FEE9  -  7469   
FEEA  -  6E75   
FEEB  -  6520   
FEEC  -  286E   
FEED  -  6F20   
FEEE  -  7374   
FEEF  -  6F70   
FEF0  -  290A   
FEF1  -  6509   
FEF2  -  4578   
FEF3  -  6563   
FEF4  -  7574   
FEF5  -  6520   
FEF6  -  2877   
FEF7  -  2062   
FEF8  -  7265   
FEF9  -  616B   
FEFA  -  706F   
FEFB  -  696E   
FEFC  -  7429   
FEFD  -  0A73   
FEFE  -  0953   
FEFF  -  696E   
FF00  -  676C   
FF01  -  6520   
FF02  -  7374   
FF03  -  6570   
FF04  -  0A6E   
FF05  -  0965   
FF06  -  7865   
FF07  -  6320   
FF08  -  756E   
FF09  -  7469   
FF0A  -  6C20   
FF0B  -  4E65   
FF0C  -  7874   
FF0D  -  2069   
FF0E  -  6E73   
FF0F  -  7472   
FF10  -  0A72   
FF11  -  0965   
FF12  -  7865   
FF13  -  6320   
FF14  -  756E   
FF15  -  7469   
FF16  -  6C20   
FF17  -  7265   
FF18  -  7475   
FF19  -  726E   
FF1A  -  2028   
FF1B  -  4A49   
FF1C  -  4E44   
FF1D  -  2052   
FF1E  -  3629   
FF1F  -  0A52   
FF20  -  0965   
FF21  -  7865   
FF22  -  6320   
FF23  -  756E   
FF24  -  7469   
FF25  -  6C20   
FF26  -  7265   
FF27  -  7475   
FF28  -  726E   
FF29  -  2061   
FF2A  -  7420   
FF2B  -  6869   
FF2C  -  6768   
FF2D  -  6572   
FF2E  -  2073   
FF2F  -  7461   
FF30  -  636B   
FF31  -  206C   
FF32  -  6576   
FF33  -  656C   
FF34  -  0A62   
FF35  -  205B   
FF36  -  6164   
FF37  -  725D   
FF38  -  0973   
FF39  -  6574   
FF3A  -  2042   
FF3B  -  7265   
FF3C  -  616B   
FF3D  -  706F   
FF3E  -  696E   
FF3F  -  740A   
FF40  -  6420   
FF41  -  5B61   
FF42  -  6472   
FF43  -  5D09   
FF44  -  4469   
FF45  -  7373   
FF46  -  6173   
FF47  -  656D   
FF48  -  626C   
FF49  -  650A   
FF4A  -  6D20   
FF4B  -  5B61   
FF4C  -  6472   
FF4D  -  5D09   
FF4E  -  4D65   
FF4F  -  6D6F   
FF50  -  7279   
FF51  -  2064   
FF52  -  756D   
FF53  -  700A   
FF54  -  0000   
FF55  -  0A55   TXTLOAD:	ASCZBE "\nUpload program to debug\n"
FF56  -  706C   
FF57  -  6F61   
FF58  -  6420   
FF59  -  7072   
FF5A  -  6F67   
FF5B  -  7261   
FF5C  -  6D20   
FF5D  -  746F   
FF5E  -  2064   
FF5F  -  6562   
FF60  -  7567   
FF61  -  0A00   
FF62  -         ;-------------------------------------------------------------------
FF62  -         ;
FF62  -         ;		MAIN (OVERWRITABLE BY THE STACK)
FF62  -         ;
FF62  -         ;-------------------------------------------------------------------
FF62  -         PSTART:	
FF62  -         START:	
FF62  -  5700   		LDI		R7,0
FF63  -         
FF63  -  58E0   		LDPC	R0
FF64  -  FF55   		WORD	TXTLOAD
FF65  -  7F24   		JAL		PUTSBE
FF66  -         
FF66  -         		; BOOTLOADER-LIKE CODE
FF66  -  5520   		LDI		R5,IOBASE
FF67  -  60A2   BUC1:	LD		R0,(R5+UARTDAT-IOBASE)
FF68  -  484C   		CMPI	R0,'L'
FF69  -  9FFD   		JNZ		BUC1
FF6A  -  68A2   		ST		(R5+UARTDAT-IOBASE),R0
FF6B  -  7018   		JAL		GETW
FF6C  -  0A01   		OR		R2,R0,R0		; ADDRESS
FF6D  -  7016   		JAL		GETW
FF6E  -  0B01   		OR		R3,R0,R0		; COUNT
FF6F  -  7014   		JAL		GETW
FF70  -  0C01   		OR		R4,R0,R0		; ENTRY POINT
FF71  -         
FF71  -  7012   BUC2:	JAL		GETW
FF72  -  6840   		ST		(R2),R0
FF73  -  1201   		ADDI	R2,1
FF74  -  1B01   		SUBI	R3,1
FF75  -  9FFB   		JNZ		BUC2
FF76  -         
FF76  -         		; SET IRQ JUMP 
FF76  -  51FF   		LDI		R1,0XFF
FF77  -  58E0   		LDPC	R0
FF78  -  FAEF   		WORD	JMPIRQ
FF79  -  6831   		ST		(R1+0X110-0XFF),R0
FF7A  -         		; SET TRACE, BREAK, CLEAR DIRTY
FF7A  -  5AE0   		LDPC	R2
FF7B  -  FED6   		WORD	BVAR
FF7C  -  5000   		LDI		R0,0
FF7D  -  6941   		ST		(R2+TRACE-BVAR),R1
FF7E  -  6842   		ST		(R2+BREAK-BVAR),R0
FF7F  -  68A6   		ST		(R5+FLAG0-IOBASE),R0
FF80  -         
FF80  -         		; ENABLE SSTEP IRQ
FF80  -  60A0   		LD		R0,(R5+IRQEN-IOBASE)
FF81  -  3810   		ORI		R0,0X10
FF82  -  68A0   		ST		(R5+IRQEN-IOBASE),R0
FF83  -         		; AND JUMP TO CODE
FF83  -  58F2   		JIND	R4
FF84  -         
FF84  -         ;-------------------------------------------------------------------
FF84  -         ; GET 16-BIT WORD FROM UART (TWO BYTES)
FF84  -  60A2   GETW:	LD		R0,(R5+UARTDAT-IOBASE)	; LSB
FF85  -  61A2   		LD		R1,(R5+UARTDAT-IOBASE)	; MSB
FF86  -  5944   		RORI	R1,R1,8
FF87  -  0805   		OR		R0,R0,R1
FF88  -  58FA   		JIND	R6
FF89  -         
FF89  -         
FF89  -         PEND:
FF89  -         
FF89  -         
FF89  -         
